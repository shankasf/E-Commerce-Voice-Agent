# HTTPS Ingress Configuration for All Applications
# Uses cert-manager with Let's Encrypt for automatic SSL certificates
# Domains: *.callsphere.tech

---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: callsphere-ingress-https
  namespace: callsphere-website
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-prod
    traefik.ingress.kubernetes.io/router.entrypoints: websecure
    traefik.ingress.kubernetes.io/router.tls: "true"
spec:
  tls:
    - hosts:
        - callsphere.tech
        - www.callsphere.tech
      secretName: callsphere-tls
  rules:
    - host: callsphere.tech
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: callsphere-web
                port:
                  number: 3000
    - host: www.callsphere.tech
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: callsphere-web
                port:
                  number: 3000
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: google-map-ingress-https
  namespace: google-map
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-prod
    traefik.ingress.kubernetes.io/router.entrypoints: websecure
    traefik.ingress.kubernetes.io/router.tls: "true"
spec:
  tls:
    - hosts:
        - map.callsphere.tech
      secretName: map-tls
  rules:
    - host: map.callsphere.tech
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: google-map
                port:
                  number: 3000
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: realestate-ingress-https
  namespace: realestate-voice
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-prod
    traefik.ingress.kubernetes.io/router.entrypoints: websecure
    traefik.ingress.kubernetes.io/router.tls: "true"
spec:
  tls:
    - hosts:
        - realestate.callsphere.tech
      secretName: realestate-tls
  rules:
    - host: realestate.callsphere.tech
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: realestate-voice
                port:
                  number: 8087
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: salon-ingress-https
  namespace: salon
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-prod
    traefik.ingress.kubernetes.io/router.entrypoints: websecure
    traefik.ingress.kubernetes.io/router.tls: "true"
spec:
  tls:
    - hosts:
        - salon.callsphere.tech
      secretName: salon-tls
  rules:
    - host: salon.callsphere.tech
      http:
        paths:
          - path: /api
            pathType: Prefix
            backend:
              service:
                name: salon-backend
                port:
                  number: 3000
          - path: /ai
            pathType: Prefix
            backend:
              service:
                name: salon-ai
                port:
                  number: 8000
          - path: /
            pathType: Prefix
            backend:
              service:
                name: salon-frontend
                port:
                  number: 5173
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: tickets-ingress-https
  namespace: ticket-console
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-prod
    traefik.ingress.kubernetes.io/router.entrypoints: websecure
    traefik.ingress.kubernetes.io/router.tls: "true"
spec:
  tls:
    - hosts:
        - tickets.callsphere.tech
      secretName: tickets-tls
  rules:
    - host: tickets.callsphere.tech
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: ticket-console
                port:
                  number: 3001
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: urackit-ingress-https
  namespace: urackit-v2
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-prod
    traefik.ingress.kubernetes.io/router.entrypoints: websecure
    traefik.ingress.kubernetes.io/router.tls: "true"
spec:
  tls:
    - hosts:
        - urackit.callsphere.tech
      secretName: urackit-tls
  rules:
    - host: urackit.callsphere.tech
      http:
        paths:
          - path: /api
            pathType: Prefix
            backend:
              service:
                name: urackit-backend
                port:
                  number: 3003
          - path: /ai
            pathType: Prefix
            backend:
              service:
                name: urackit-ai
                port:
                  number: 8081
          - path: /
            pathType: Prefix
            backend:
              service:
                name: urackit-frontend
                port:
                  number: 80
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: healthcare-ingress-https
  namespace: healthcare-voice
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-prod
    traefik.ingress.kubernetes.io/router.entrypoints: websecure
    traefik.ingress.kubernetes.io/router.tls: "true"
spec:
  tls:
    - hosts:
        - healthcare.callsphere.tech
      secretName: healthcare-tls
  rules:
    - host: healthcare.callsphere.tech
      http:
        paths:
          - path: /api
            pathType: Prefix
            backend:
              service:
                name: healthcare-backend
                port:
                  number: 3005
          - path: /ai
            pathType: Prefix
            backend:
              service:
                name: healthcare-ai
                port:
                  number: 8084
          - path: /
            pathType: Prefix
            backend:
              service:
                name: healthcare-frontend
                port:
                  number: 80
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: escalation-ingress-https
  namespace: afterhours-escalation
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-prod
    traefik.ingress.kubernetes.io/router.entrypoints: websecure
    traefik.ingress.kubernetes.io/router.tls: "true"
spec:
  tls:
    - hosts:
        - escalation.callsphere.tech
      secretName: escalation-tls
  rules:
    - host: escalation.callsphere.tech
      http:
        paths:
          - path: /api
            pathType: Prefix
            backend:
              service:
                name: escalation-backend
                port:
                  number: 3004
          - path: /ai
            pathType: Prefix
            backend:
              service:
                name: escalation-ai
                port:
                  number: 8083
          - path: /
            pathType: Prefix
            backend:
              service:
                name: escalation-frontend
                port:
                  number: 80
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: quiz-ingress-https
  namespace: quiz
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-prod
    traefik.ingress.kubernetes.io/router.entrypoints: websecure
    traefik.ingress.kubernetes.io/router.tls: "true"
spec:
  tls:
    - hosts:
        - quiz.callsphere.tech
      secretName: quiz-tls
  rules:
    - host: quiz.callsphere.tech
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: quiz
                port:
                  number: 80
