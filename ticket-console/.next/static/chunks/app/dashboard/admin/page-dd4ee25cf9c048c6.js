(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[305],{1667:function(e,s,t){Promise.resolve().then(t.bind(t,9129))},2222:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]])},407:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},1671:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1723:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},5471:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]])},1817:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},7692:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},5080:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]])},6865:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},9129:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return P}});var a=t(7437),l=t(7766),r=t(2265),i=t(1837),n=t(3552),c=t(2222),d=t(9205);let x=(0,d.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var o=t(1817),m=t(1723);let h=(0,d.Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),g=(0,d.Z)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),p=(0,d.Z)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),u=(0,d.Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),j=(0,d.Z)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),y=(0,d.Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),v=(0,d.Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),N=(0,d.Z)("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);function b(e){let{data:s,aiColor:t="#8B5CF6",humanColor:l="#10B981"}=e,r=Math.max(...s.flatMap(e=>[e.ai,e.human]),1);return(0,a.jsx)("div",{className:"space-y-3",children:s.map((e,s)=>(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600 font-medium",children:e.label}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["AI: ",e.ai," | Human: ",e.human]})]}),(0,a.jsxs)("div",{className:"flex gap-1 h-6",children:[(0,a.jsx)("div",{className:"rounded-l transition-all duration-500",style:{width:"".concat(e.ai/r*100,"%"),backgroundColor:t,minWidth:e.ai>0?"4px":"0"}}),(0,a.jsx)("div",{className:"rounded-r transition-all duration-500",style:{width:"".concat(e.human/r*100,"%"),backgroundColor:l,minWidth:e.human>0?"4px":"0"}})]})]},s))})}function f(e){let{data:s}=e,t=Math.max(...s.flatMap(e=>[e.ai,e.human]),1),l=e=>e%5==0;return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"flex items-end gap-[2px] h-[120px]",children:s.map((e,s)=>{let l=e.ai/t*120,r=e.human/t*120;return(0,a.jsx)("div",{className:"flex-1 flex flex-col items-center gap-[1px]",title:"".concat(e.date,": AI ").concat(e.ai,", Human ").concat(e.human),children:(0,a.jsxs)("div",{className:"w-full flex gap-[1px]",style:{height:120},children:[(0,a.jsx)("div",{className:"flex-1 flex flex-col justify-end",children:(0,a.jsx)("div",{className:"w-full bg-purple-500 rounded-t transition-all duration-300",style:{height:l}})}),(0,a.jsx)("div",{className:"flex-1 flex flex-col justify-end",children:(0,a.jsx)("div",{className:"w-full bg-green-500 rounded-t transition-all duration-300",style:{height:r}})})]})},s)})}),(0,a.jsx)("div",{className:"flex justify-between mt-2",children:s.filter((e,s)=>l(s)).map((e,s)=>(0,a.jsx)("span",{className:"text-[10px] text-gray-400",children:e.date},s))})]})}function w(e){let{value:s,size:t=80,strokeWidth:l=8,color:r="#8B5CF6"}=e,i=(t-l)/2,n=2*i*Math.PI;return(0,a.jsxs)("div",{className:"relative",style:{width:t,height:t},children:[(0,a.jsxs)("svg",{className:"transform -rotate-90",width:t,height:t,children:[(0,a.jsx)("circle",{className:"text-gray-200",strokeWidth:l,stroke:"currentColor",fill:"transparent",r:i,cx:t/2,cy:t/2}),(0,a.jsx)("circle",{className:"transition-all duration-500",strokeWidth:l,strokeDasharray:n,strokeDashoffset:n-s/100*n,strokeLinecap:"round",stroke:r,fill:"transparent",r:i,cx:t/2,cy:t/2})]}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsxs)("span",{className:"text-xl font-bold text-gray-800",children:[s,"%"]})})]})}function k(e){let{isOpen:s,onClose:t}=e,[l,i]=(0,r.useState)(null),[n,d]=(0,r.useState)(!0),[k,A]=(0,r.useState)(null);(0,r.useEffect)(()=>{s&&Z()},[s]);let Z=async()=>{try{d(!0),A(null);let e=await fetch("/tms/api/ai-metrics");if(!e.ok)throw Error("Failed to load metrics");let s=await e.json();i(s)}catch(e){A("Failed to load AI metrics"),console.error(e)}finally{d(!1)}};return s?(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 px-6 py-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-white/20 rounded-lg",children:(0,a.jsx)(c.Z,{className:"w-6 h-6 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-white",children:"AI Performance Metrics"}),(0,a.jsx)("p",{className:"text-purple-200 text-sm",children:"Comprehensive AI vs Human Support Analysis"})]})]}),(0,a.jsx)("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:(0,a.jsx)(x,{className:"w-5 h-5 text-white"})})]}),(0,a.jsx)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-80px)]",children:n?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-20",children:[(0,a.jsx)(o.Z,{className:"w-10 h-10 text-purple-600 animate-spin mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Loading AI metrics..."})]}):k?(0,a.jsxs)("div",{className:"text-center py-20",children:[(0,a.jsx)("p",{className:"text-red-500",children:k}),(0,a.jsx)("button",{onClick:Z,className:"mt-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):l?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsx)("div",{className:"bg-gradient-to-br from-purple-50 to-indigo-50 rounded-xl p-4 border border-purple-100",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"AI Resolution Rate"}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-purple-600",children:[l.summary.aiResolutionRate,"%"]}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"of all resolved tickets"})]}),(0,a.jsx)(w,{value:l.summary.aiResolutionRate})]})}),(0,a.jsx)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-4 border border-green-100",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-3 bg-green-100 rounded-lg",children:(0,a.jsx)(m.Z,{className:"w-6 h-6 text-green-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Time Saved by AI"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:[l.summary.timeSavedByAI,"h"]}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:"total hours saved"})]})]})}),(0,a.jsx)("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 rounded-xl p-4 border border-blue-100",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg",children:(0,a.jsx)(h,{className:"w-6 h-6 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Cost Savings"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:["$",l.summary.costSavedByAI.toLocaleString()]}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:"at $25/hr agent rate"})]})]})}),(0,a.jsx)("div",{className:"bg-gradient-to-br from-orange-50 to-amber-50 rounded-xl p-4 border border-orange-100",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-3 bg-orange-100 rounded-lg",children:(0,a.jsx)(g,{className:"w-6 h-6 text-orange-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"AI Response Speed"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-orange-600",children:[l.summary.avgAIResponseTime,"s"]}),(0,a.jsxs)("p",{className:"text-xs text-gray-400",children:["vs ",l.summary.avgHumanResponseTime,"min human"]})]})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-gray-200 text-center",children:[(0,a.jsx)(p,{className:"w-5 h-5 text-gray-400 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-800",children:l.summary.totalTickets}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Total Tickets"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-gray-200 text-center",children:[(0,a.jsx)(c.Z,{className:"w-5 h-5 text-purple-500 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:l.summary.resolvedByAI}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Resolved by AI"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-gray-200 text-center",children:[(0,a.jsx)(u,{className:"w-5 h-5 text-green-500 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-green-600",children:l.summary.resolvedByHuman}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Resolved by Human"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-gray-200 text-center",children:[(0,a.jsx)(j,{className:"w-5 h-5 text-orange-500 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:l.summary.escalatedToHuman}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Escalated to Human"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-gray-200 text-center",children:[(0,a.jsx)(y,{className:"w-5 h-5 text-blue-500 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:l.summary.aiMessagesCount}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"AI Messages Sent"})]})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl p-5 border border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)(v,{className:"w-5 h-5 text-purple-600"}),(0,a.jsx)("h3",{className:"font-semibold text-gray-800",children:"30-Day Resolution Trend"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-purple-500 rounded"}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"AI"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded"}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Human"})]})]}),(0,a.jsx)(f,{data:l.charts.dailyTrend})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl p-5 border border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)(N,{className:"w-5 h-5 text-purple-600"}),(0,a.jsx)("h3",{className:"font-semibold text-gray-800",children:"Resolution by Priority"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-purple-500 rounded"}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"AI"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded"}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Human"})]})]}),(0,a.jsx)(b,{data:l.charts.priorityBreakdown.map(e=>({label:e.priority,ai:e.ai,human:e.human}))})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl p-5 border border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)(u,{className:"w-5 h-5 text-purple-600"}),(0,a.jsx)("h3",{className:"font-semibold text-gray-800",children:"Organization Support Preference"}),(0,a.jsx)("span",{className:"text-sm text-gray-400 ml-auto",children:"AI vs Human Resolution Rate by Organization"})]}),0===l.charts.orgPreference.length?(0,a.jsx)("p",{className:"text-gray-500 text-center py-4",children:"No organization data available yet"}):(0,a.jsx)("div",{className:"space-y-3",children:l.charts.orgPreference.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-32 text-sm text-gray-600 truncate",title:e.name,children:e.name}),(0,a.jsxs)("div",{className:"flex-1 h-8 bg-gray-100 rounded-lg overflow-hidden flex",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-purple-400 flex items-center justify-center text-xs text-white font-medium transition-all duration-500",style:{width:"".concat(e.aiPercentage,"%")},children:e.aiPercentage>15&&"".concat(e.aiPercentage,"%")}),(0,a.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-green-400 flex items-center justify-center text-xs text-white font-medium transition-all duration-500",style:{width:"".concat(100-e.aiPercentage,"%")},children:100-e.aiPercentage>15&&"".concat(100-e.aiPercentage,"%")})]}),(0,a.jsxs)("div",{className:"w-24 text-right",children:[(0,a.jsxs)("span",{className:"text-xs text-purple-600 font-medium",children:[e.ai," AI"]}),(0,a.jsx)("span",{className:"text-gray-300 mx-1",children:"|"}),(0,a.jsxs)("span",{className:"text-xs text-green-600 font-medium",children:[e.human," Human"]})]})]},s))})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 rounded-xl p-6 text-white",children:[(0,a.jsxs)("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[(0,a.jsx)(g,{className:"w-5 h-5"}),"Response Time Advantage"]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,a.jsx)("div",{className:"bg-white/10 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(c.Z,{className:"w-8 h-8"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-3xl font-bold",children:[l.summary.avgAIResponseTime," seconds"]}),(0,a.jsx)("p",{className:"text-purple-200 text-sm",children:"Average AI Response Time"})]})]})}),(0,a.jsx)("div",{className:"bg-white/10 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(u,{className:"w-8 h-8"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-3xl font-bold",children:[l.summary.avgHumanResponseTime," minutes"]}),(0,a.jsx)("p",{className:"text-purple-200 text-sm",children:"Average Human Response Time"})]})]})})]}),(0,a.jsx)("div",{className:"mt-4 text-center",children:(0,a.jsxs)("p",{className:"text-lg",children:["AI responds"," ",(0,a.jsxs)("span",{className:"font-bold text-2xl text-yellow-300",children:[Math.round(60*l.summary.avgHumanResponseTime/l.summary.avgAIResponseTime),"x"]})," ","faster than human agents"]})})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-xl p-5 border border-gray-200",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-800 mb-4",children:"\uD83D\uDE80 AI Support Benefits Summary"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg shrink-0",children:(0,a.jsx)(m.Z,{className:"w-5 h-5 text-purple-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-800",children:"24/7 Availability"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"AI never sleeps, instant responses anytime"})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-green-100 rounded-lg shrink-0",children:(0,a.jsx)(v,{className:"w-5 h-5 text-green-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-800",children:"Scalable Support"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Handle unlimited tickets simultaneously"})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg shrink-0",children:(0,a.jsx)(h,{className:"w-5 h-5 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-800",children:"Cost Effective"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Reduce support costs by up to 70%"})]})]})]})]})]}):null})]})}):null}var A=t(5080);let Z=(0,d.Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);var M=t(5471);let C=(0,d.Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);var S=t(7692),I=t(6865),R=t(1671);let z=(0,d.Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);var T=t(407),H=t(5710);let _={Low:"bg-gray-100 text-gray-700",Medium:"bg-blue-100 text-blue-700",High:"bg-orange-100 text-orange-700",Critical:"bg-red-100 text-red-700"},E={Open:"bg-yellow-100 text-yellow-700","In Progress":"bg-blue-100 text-blue-700","Awaiting Customer":"bg-purple-100 text-purple-700",Escalated:"bg-orange-100 text-orange-700",Resolved:"bg-green-100 text-green-700",Closed:"bg-gray-100 text-gray-700"};function P(){let{user:e,logout:s,isLoading:t}=(0,l.a)(),[c,d]=(0,r.useState)(!1),[x,o]=(0,r.useState)("tickets"),[h,g]=(0,r.useState)(null),[p,j]=(0,r.useState)([]),[y,v]=(0,r.useState)([]),[N,b]=(0,r.useState)([]),[f,w]=(0,r.useState)([]),[P,B]=(0,r.useState)(!0),[q,O]=(0,r.useState)(),[L,D]=(0,r.useState)(!1),V=(0,r.useCallback)(async()=>{try{let e=await i.Sb.getDashboardStats();g(e)}catch(e){console.error("Error loading stats:",e)}},[]),U=(0,r.useCallback)(async()=>{try{B(!0);let e=await i.Sb.getAllTickets({statusId:q});j(e)}catch(e){console.error("Error loading tickets:",e)}finally{B(!1)}},[q]),F=(0,r.useCallback)(async()=>{try{B(!0);let e=await i.Sb.getOrganizations();v(e)}catch(e){console.error("Error loading organizations:",e)}finally{B(!1)}},[]),W=(0,r.useCallback)(async()=>{try{B(!0);let e=await i.Sb.getContacts();b(e)}catch(e){console.error("Error loading contacts:",e)}finally{B(!1)}},[]),$=(0,r.useCallback)(async()=>{try{B(!0);let e=await i.Sb.getAgents();w(e)}catch(e){console.error("Error loading agents:",e)}finally{B(!1)}},[]);(0,n.im)(()=>{console.log("[Realtime] Update received, refreshing..."),V(),"tickets"===x&&U()}),(0,r.useEffect)(()=>{let e=setInterval(()=>{console.log("[Polling] Refreshing data..."),V(),"tickets"===x&&U()},1e4);return()=>clearInterval(e)},[x,V,U]),(0,r.useEffect)(()=>{t||e?t||(null==e?void 0:e.role)==="admin"||(window.location.href="/tms/dashboard/".concat(null==e?void 0:e.role)):window.location.href="/tms"},[e,t]),(0,r.useEffect)(()=>{e&&V()},[e,V]),(0,r.useEffect)(()=>{"tickets"===x?U():"organizations"===x?F():"contacts"===x?W():"agents"===x&&$()},[x,q,U,F,W,$]);let G=e=>{window.location.href="/tms/dashboard/admin/ticket/".concat(e)};if(t||!e)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."});let Q=[{id:"tickets",label:"All Tickets",icon:A.Z,count:null==h?void 0:h.totalTickets},{id:"organizations",label:"Organizations",icon:Z,count:null==h?void 0:h.totalOrganizations},{id:"contacts",label:"Contacts",icon:u,count:null==h?void 0:h.totalContacts},{id:"agents",label:"Agents",icon:M.Z,count:null==h?void 0:h.totalAgents}];return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"bg-purple-600 text-white",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl font-bold",children:"Admin Dashboard"}),(0,a.jsx)("p",{className:"text-sm text-purple-200",children:"U Rack IT Management Console"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("button",{onClick:()=>D(!0),className:"flex items-center gap-2 bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg transition-colors",children:[(0,a.jsx)(C,{className:"w-4 h-4"}),"AI Metrics"]}),(0,a.jsxs)("button",{onClick:()=>{s(),window.location.href="/tms"},className:"flex items-center gap-2 text-purple-200 hover:text-white",children:[(0,a.jsx)(S.Z,{className:"w-4 h-4"}),"Logout"]})]})]})}),h&&(0,a.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-5 gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,a.jsx)(I.Z,{className:"w-5 h-5 text-yellow-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xl font-bold text-gray-900",children:h.openTickets}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Open"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,a.jsx)(m.Z,{className:"w-5 h-5 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xl font-bold text-gray-900",children:h.inProgressTickets}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"In Progress"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-orange-100 rounded-lg",children:(0,a.jsx)(I.Z,{className:"w-5 h-5 text-orange-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xl font-bold text-gray-900",children:h.escalatedTickets}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Escalated"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-red-100 rounded-lg",children:(0,a.jsx)(I.Z,{className:"w-5 h-5 text-red-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xl font-bold text-gray-900",children:h.criticalTickets}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Critical"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,a.jsx)(R.Z,{className:"w-5 h-5 text-green-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-xl font-bold text-gray-900",children:[h.availableAgents,"/",h.totalAgents]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Agents Available"})]})]})]})})}),(0,a.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4",children:(0,a.jsx)("div",{className:"flex gap-1",children:Q.map(e=>(0,a.jsxs)("button",{onClick:()=>o(e.id),className:"flex items-center gap-2 px-4 py-3 border-b-2 transition-colors ".concat(x===e.id?"border-purple-600 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700"),children:[(0,a.jsx)(e.icon,{className:"w-4 h-4"}),e.label,void 0!==e.count&&(0,a.jsx)("span",{className:"text-xs bg-gray-100 px-2 py-0.5 rounded-full",children:e.count})]},e.id))})})}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 py-6",children:["tickets"===x&&(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"font-semibold text-gray-900",children:"All Tickets"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(z,{className:"w-4 h-4 text-gray-400"}),(0,a.jsxs)("select",{value:q||"",onChange:e=>O(e.target.value?parseInt(e.target.value):void 0),className:"text-sm border border-gray-300 rounded-lg px-3 py-1",children:[(0,a.jsx)("option",{value:"",children:"All Statuses"}),(0,a.jsx)("option",{value:"1",children:"Open"}),(0,a.jsx)("option",{value:"2",children:"In Progress"}),(0,a.jsx)("option",{value:"3",children:"Awaiting Customer"}),(0,a.jsx)("option",{value:"4",children:"Escalated"}),(0,a.jsx)("option",{value:"5",children:"Resolved"}),(0,a.jsx)("option",{value:"6",children:"Closed"})]})]})]}),P?(0,a.jsx)("div",{className:"p-8 text-center text-gray-500",children:"Loading..."}):0===p.length?(0,a.jsx)("div",{className:"p-8 text-center text-gray-500",children:"No tickets found"}):(0,a.jsx)("div",{className:"divide-y divide-gray-100",children:p.map(e=>{var s,t,l,r,i,n;return(0,a.jsxs)("div",{onClick:()=>G(e.ticket_id),className:"p-4 hover:bg-gray-50 cursor-pointer flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:["#",e.ticket_id]}),(0,a.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full ".concat(E[null===(s=e.status)||void 0===s?void 0:s.name]||"bg-gray-100"),children:null===(t=e.status)||void 0===t?void 0:t.name}),(0,a.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full ".concat(_[null===(l=e.priority)||void 0===l?void 0:l.name]||"bg-gray-100"),children:null===(r=e.priority)||void 0===r?void 0:r.name}),e.requires_human_agent&&(0,a.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full bg-purple-100 text-purple-700",children:"Needs Human"})]}),(0,a.jsx)("p",{className:"font-medium text-gray-900",children:e.subject}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[null===(i=e.contact)||void 0===i?void 0:i.full_name," • ",null===(n=e.organization)||void 0===n?void 0:n.name," • ",(0,H.Q)(new Date(e.created_at),{addSuffix:!0})]})]}),(0,a.jsx)(T.Z,{className:"w-5 h-5 text-gray-400"})]},e.ticket_id)})})]}),"organizations"===x&&(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200",children:[(0,a.jsx)("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:(0,a.jsx)("h2",{className:"font-semibold text-gray-900",children:"Organizations"})}),P?(0,a.jsx)("div",{className:"p-8 text-center text-gray-500",children:"Loading..."}):0===y.length?(0,a.jsx)("div",{className:"p-8 text-center text-gray-500",children:"No organizations found"}):(0,a.jsx)("div",{className:"divide-y divide-gray-100",children:y.map(e=>(0,a.jsx)("div",{className:"p-4 flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(Z,{className:"w-5 h-5 text-purple-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["U&E Code: ",e.u_e_code]})]})]})},e.organization_id))})]}),"contacts"===x&&(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200",children:[(0,a.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,a.jsx)("h2",{className:"font-semibold text-gray-900",children:"Contacts"})}),P?(0,a.jsx)("div",{className:"p-8 text-center text-gray-500",children:"Loading..."}):0===N.length?(0,a.jsx)("div",{className:"p-8 text-center text-gray-500",children:"No contacts found"}):(0,a.jsx)("div",{className:"divide-y divide-gray-100",children:N.map(e=>{var s;return(0,a.jsx)("div",{className:"p-4 flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(u,{className:"w-5 h-5 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:e.full_name}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[e.email," • ",e.phone]}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:null===(s=e.organization)||void 0===s?void 0:s.name})]})]})},e.contact_id)})})]}),"agents"===x&&(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200",children:[(0,a.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,a.jsx)("h2",{className:"font-semibold text-gray-900",children:"Support Agents"})}),P?(0,a.jsx)("div",{className:"p-8 text-center text-gray-500",children:"Loading..."}):0===f.length?(0,a.jsx)("div",{className:"p-8 text-center text-gray-500",children:"No agents found"}):(0,a.jsx)("div",{className:"divide-y divide-gray-100",children:f.map(e=>(0,a.jsxs)("div",{className:"p-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center ".concat("Bot"===e.agent_type?"bg-purple-100":"bg-green-100"),children:(0,a.jsx)(M.Z,{className:"w-5 h-5 ".concat("Bot"===e.agent_type?"text-purple-600":"text-green-600")})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:e.full_name}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[e.agent_type," • ",e.specialization||"General"]})]})]}),(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat(e.is_available?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"),children:e.is_available?"Available":"Offline"})]},e.support_agent_id))})]})]}),(0,a.jsx)(k,{isOpen:L,onClose:()=>D(!1)})]})}}},function(e){e.O(0,[539,152,971,117,744],function(){return e(e.s=1667)}),_N_E=e.O()}]);