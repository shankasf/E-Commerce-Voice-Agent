services:
  salon:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: salon
    ports:
      - "3020:3000"   # Backend
      - "5177:5173"   # Frontend
      - "8086:8000"   # AI Service
    env_file:
      - ./ai-service/.env
    environment:
      - NODE_ENV=development
      - PYTHONUNBUFFERED=1
    volumes:
      # Mount source directories for hot-reload
      - ./frontend/src:/app/frontend/src
      - ./frontend/vite.config.ts:/app/frontend/vite.config.ts
      - ./frontend/.env:/app/frontend/.env
      - ./backend/src:/app/backend/src
      - ./ai-service:/app/ai-service
      # Persist data
      - ./db:/app/db
    restart: unless-stopped
